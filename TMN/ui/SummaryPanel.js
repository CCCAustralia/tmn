
Ext.ns('tmn', 'tmn.view');

/**
 * @class		SummaryPanel
 * 
 * <p>
 * <b>Description:</b> The Panel that lets the user view, print and submit their TMN.
 * </p>
 * 
 * @author		Michael Harrison	(<a href="mailto:michael.harrison@ccca.org.au">michael.harrison@ccca.org.au</a>)
 * 				& Thomas Flynn		(<a href="mailto:tom.flynn@ccca.org.au">tom.flynn@ccca.org.au</a>)
 * 
 * @namespace 	tmn.view
 * @extends		Ext.Panel
 * @version		TMN 2.1.0
 * @note		The TMN uses the MVC design structure, read up on it at <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">http://en.wikipedia.org/wiki/Model-view-controller</a>).
 * @demo		http://mportal.ccca.org.au/TMN
 */
tmn.view.SummaryPanel = function(view, config) {
	/**
	 * @cfg {Object}	view			The object that defines the container that holds this form
	 * @note To be able to use this property you must pass it to the constructor when you create an instance of this class.
	 */
	this.view = view || {};					//the view that this form is contained in
	//set config variable to passed or default
	config = config || {};

	//set config options to passed or default
	/**
	 * @cfg {String}	id				The id parameter of the html tag that contains the form.<br />
	 * 									Default: 'print_form'
	 */
	var id					=	config.id || 'summary_panel';
	
	/**
	 * holds the response for each form after it is submitted successfully (accessed by 'international-assignment', 'home-assignment' or 'aussie-based'
	 * (each of these is also has 'single' or 'spouse') ie templates['aussie-based']['single'])
	 * @type An Associative Array of Associative arrays of Strings
	 */
	this.templates = {};
	this.templates['aussie-based'] = {};
	this.templates['international-assignment'] = {};
	this.templates['home-assignment'] = {};

	//defines the aussie based template for displaying the TMN
	//ABS
this.templates['aussie-based']['single'] = new Ext.XTemplate('<!-- START aussie-based-single --><div class="tmn-page"><table><tr><td><h1 class="tmn-title">Total Monthly Needs</h1></td><td><img class="tmn-logo" src="http://www.ccca.org.au/tntmpd/TntMPDCCCALogo-new.JPG" alt="CCCA Logo" /></td></tr></table><div class="tmn-instructions"><div>The TMN is now submitted online, you may still want to save/print a copy for your own records.</div></div><p>&nbsp;</p><table><tr><td style="width:50%;"><b>Name: </b>{firstname} {surname}</td><td style="width:25%;"><b>Date: </b>{date}</td><td style="width:25%;"><b>Support Account: </b>{fan}</td></tr><tr><td colspan="3"><br /><br /></td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="regular_buffer == 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th colspan="2">Your Account must be above: ${buffer}</th></tr></tpl><tpl if="regular_buffer &gt; 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th>Your Account must be above ${buffer} to start</th><th>Normally Your Account must be above: ${regular_buffer}</th></tr></tpl><tr><td colspan="3"><hr /></td></tr></table><p>&nbsp;</p><div class="tmn-break-down"><div class="header">TMN Break Down</div><table><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Stipend (Money in your account)</th><td>${stipend}</td></tr><tpl if="housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">Housing Stipend (The amount of your stipend that will be used on housing)</th><td>${housing_stipend}</td></tr></tpl><tpl if="taxable_future_investment &gt; 0"><tr class="tmn-data"><th colspan="2">Future Investment (The amount of your stipend that will go toward your nominated investment)</th><td>${taxable_future_investment}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Stipend + <tpl if="housing_stipend &gt; 0">Housing Stipend + </tpl><tpl if="taxable_future_investment &gt; 0">Future Investment + </tpl>Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">MFB\'s</th><td>${max_mfb}</td></tr><tpl if="additional_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Housing Allowance</th><td>${additional_housing_allowance}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Mortgage Payment</th><td>${additional_mortgage}</td></tr></tpl><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td>${total_transfers}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td>${workers_comp}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td>${ccca_levy}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td>${tmn}</td></tr><tr><td colspan="3"><hr /></td></tr></table></div><tpl if="housing &gt; 0"><p>&nbsp;</p><div class="tmn-housing-summary"><div class="header">Housing Summary</div><table><tr class="tmn-data"><th colspan="2">The amount that comes from your MFBs monthly</th><td>${housing_mfb}</td></tr><tpl if="housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from you Stipend monthly</th><td>${housing_stipend}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from your Future Investment (Additional Mortgage Payment) monthly</th><td>${additional_mortgage}</td></tr></tpl><tr class="tmn-data"><th colspan="2">The amount that comes from Additional Housing Allowance monthly</th><td>${additional_housing}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Housing</th><td>${monthly_housing}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th style="text-align:center;" colspan="4">CCCA will pay ${housing} into your elected housing account {housing_frequency}.</th></tr><tr><td colspan="3"><hr /></td></tr><tpl if="additional_mortgage &gt; 0"><tr><th style="text-align:center;" colspan="4">CCCA will also pay an additional ${additional_mortgage} monthly toward your mortgage.<br />This payment will be paid according to the details on your Future Investment Form.</th></tr><tr><td colspan="3"><hr /></td></tr></tpl></table></div></tpl><tpl if="max_mfb &gt; 0"><p>&nbsp;</p><div class="tmn-mfb-summary"><div class="header">Ministry Fringe Benifits Summary</div><table><tr><th colspan="2">MFB Rate</th><td>{mfb_rate}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that you can make claims from</th><td>${claimable_mfb}</td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that will go toward housing</th><td>${housing_mfb}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Ministry Fringe Benifits</th><td>${max_mfb}</td></tr><tr><td colspan="3"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td></tr><tpl if="pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td></tr><tpl if="additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><p class="footer">Version: {versionnumber}</p></div><!-- END aussie-based-single -->');
	//ABS

	//ABS
	
	//ABC
this.templates['aussie-based']['spouse'] = new Ext.XTemplate('<!-- START aussie-based-couple --><div class="tmn-page"><table><tr><td><h1 class="tmn-title">Total Monthly Needs</h1></td><td><img class="tmn-logo" src="http://www.ccca.org.au/tntmpd/TntMPDCCCALogo-new.JPG" alt="CCCA Logo" /></td></tr></table><div class="tmn-instructions"><div>The TMN is now submitted online, you may still want to save/print a copy for your own records.</div></div><p>&nbsp;</p><table><tr><td style="width:50%;"><b>Name: </b>{firstname} {surname} &amp; {s_firstname} {s_surname}</td><td style="width:25%;"><b>Date: </b>{date}</td><td style="width:25%;"><b>Support Account: </b>{fan}</td></tr><tr><td colspan="3"><br /><br /></td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="regular_buffer == 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th colspan="2">Your Account must be above: ${buffer}</th></tr></tpl><tpl if="regular_buffer &gt; 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th>Your Account must be above ${buffer} to start</th><th>Normally Your Account must be above: ${regular_buffer}</th></tr></tpl><tr><td colspan="3"><hr /></td></tr></table><p>&nbsp;</p><div class="tmn-break-down"><div class="header">TMN Break Down</div><table><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td><td>{s_firstname}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td><td>{s_ministry}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td><td>{s_ft_pt_os} - {s_days_per_wk} Days</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Stipend (Money in your account)</th><td>${stipend}</td><td>${s_stipend}</td></tr><tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">Housing Stipend (The amount of your stipend that will be used on housing)</th><td>${housing_stipend}</td><td>${s_housing_stipend}</td></tr></tpl><tpl if="taxable_future_investment &gt; 0 || s_taxable_future_investment &gt; 0"><tr class="tmn-data"><th colspan="2">Future Investment (The amount of your stipend that will go toward your nominated investment)</th><td>${taxable_future_investment}</td><td>${s_taxable_future_investment}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td><td>${s_tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td><td>${s_additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Stipend + <tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0">Housing Stipend + </tpl><tpl if="taxable_future_investment &gt; 0 || s_taxable_future_investment &gt; 0">Future Investment + </tpl>Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td><td>${s_taxable_income}</td></tr><tr><td colspan="4"><hr /></td></tr><tpl if="pre_tax_super &gt; 0 || s_pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">MFB\'s</th><td>${max_mfb}</td><td>${s_max_mfb}</td></tr><tpl if="additional_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Housing Allowance</th><td>${additional_housing_allowance}</td><td>${s_additional_housing_allowance}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Mortgage Payment</th><td colspan="2">${additional_mortgage}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td><td>${s_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Joint Financial Package</th><td colspan="2">${joint_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td><td>${s_mmr}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td colspan="2">${workers_comp}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td colspan="2">${ccca_levy}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td colspan="2">${tmn}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div><tpl if="housing &gt; 0"><p>&nbsp;</p><div class="tmn-housing-summary"><div class="header">Housing Summary</div><table><tr class="tmn-data"><th colspan="2">The amount that comes from your MFBs monthly</th><td>${housing_mfb}</td><td>${s_housing_mfb}</td></tr><tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from you Stipend monthly</th><td>${housing_stipend}</td><td>${s_housing_stipend}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from your Future Investment (Additional Mortgage Payment) monthly</th><td colspan="2">${additional_mortgage}</td></tr></tpl><tr class="tmn-data"><th colspan="2">The amount that comes from Additional Housing Allowance monthly</th><td colspan="2">${additional_housing}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Housing</th><td colspan="2">${monthly_housing}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th style="text-align:center;" colspan="4">CCCA will pay ${housing} into your elected housing account {housing_frequency}.</th></tr><tr><td colspan="4"><hr /></td></tr><tpl if="additional_mortgage &gt; 0"><tr><th style="text-align:center;" colspan="4">CCCA will also pay an additional ${additional_mortgage} monthly toward your mortgage.<br />This payment will be paid according to the details on your Future Investment Form.</th></tr><tr><td colspan="4"><hr /></td></tr></tpl></table></div></tpl><tpl if="max_mfb &gt; 0 || s_max_mfb &gt; 0"><p>&nbsp;</p><div class="tmn-mfb-summary"><div class="header">Ministry Fringe Benifits Summary</div><table><tr><th colspan="2">MFB Rate</th><td>{mfb_rate}</td><td>{s_mfb_rate}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that you can make claims from</th><td>${claimable_mfb}</td><td>${s_claimable_mfb}</td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that will go toward housing</th><td>${housing_mfb}</td><td>${s_housing_mfb}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Ministry Fringe Benifits</th><td>${max_mfb}</td><td>${s_max_mfb}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tpl if="pre_tax_super &gt; 0 || s_pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td><td>${s_total_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td><td>${s_resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td><td>{s_super_fund}</td></tr><tpl if="additional_life_cover &gt; 0 || s_additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td><td>{s_income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><p class="footer">Version: {versionnumber}</p></div><!-- END aussie-based-couple -->');
	//ABC

	//ABC

	//defines the international assignmnet section of the template for displaying the TMN
	//IAS
this.templates['international-assignment']['single'] = new Ext.XTemplate('<!-- START international-assignment-single --><div class="tmn-page"><table><tr><td><h1 class="tmn-title">Total Monthly Needs</h1></td></tr></table><div class="tmn-instructions"><div>The TMN is now submitted online, you may still want to save/print a copy for your own records.</div></div><p>&nbsp;</p><table><tr><td style="width:50%;"><b>Name: </b>{firstname} {surname}</td><td style="width:25%;"><b>Date: </b>{date}</td><td style="width:25%;"><b>Support Account: </b>{fan}</td></tr><tr><td colspan="3"><br /><br /></td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="regular_buffer == 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th colspan="2">Your Account must be above: ${buffer}</th></tr></tpl><tpl if="regular_buffer &gt; 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th>Your Account must be above ${buffer} to start</th><th>Normally Your Account must be above: ${regular_buffer}</th></tr></tpl><tr><td colspan="3"><hr /></td></tr></table><p>&nbsp;</p><div class="tmn-international-break-down"><div class="header">TMN Break Down for International Assignment</div><table><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Dates of Assignment</th><td>{os_assignment_start_date} - {os_assignment_end_date}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Tax Status</th><td>{os_resident_for_tax_purposes}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Net Stipend</th><td>${net_stipend}</td></tr><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Net Stipend + Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">LAFHA</th><td>${os_lafha}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td>${total_transfers}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td>${workers_comp}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td>${ccca_levy}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td>${tmn}</td></tr><tr><td colspan="3"><hr /></td></tr></table></div><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td></tr><tpl if="additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p></div><!-- END international-assignment-single -->');
	//IAS

	//IAS

	//IAC
this.templates['international-assignment']['spouse'] = new Ext.XTemplate('<!-- START international-assignment-couple --><div class="tmn-page"><table><tr><td><h1 class="tmn-title">Total Monthly Needs</h1></td></tr></table><div class="tmn-instructions"><div>The TMN is now submitted online, you may still want to save/print a copy for your own records.</div></div><p>&nbsp;</p><table><tr><td style="width:50%;"><b>Name: </b>{firstname} {surname} &amp; {s_firstname} {s_surname}</td><td style="width:25%;"><b>Date: </b>{date}</td><td style="width:25%;"><b>Support Account: </b>{fan}</td></tr><tr><td colspan="3"><br /><br /></td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="regular_buffer == 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th colspan="2">Your Account must be above: ${buffer}</th></tr></tpl><tpl if="regular_buffer &gt; 0"><tr class="tmn-goals"><th>Your Monthly Support Goal is: ${tmn}</th><th>Your Account must be above ${buffer} to start</th><th>Normally Your Account must be above: ${regular_buffer}</th></tr></tpl><tr><td colspan="3"><hr /></td></tr></table><p>&nbsp;</p><div class="tmn-international-break-down"><div class="header">TMN Break Down for International Assignment</div><table><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td><td>{s_firstname}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td><td>{s_ministry}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Dates of Assignment</th><td colspan="2">{os_assignment_start_date} - {os_assignment_end_date}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td><td>{s_ft_pt_os} - {s_days_per_wk} Days</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Tax Status</th><td colspan="2">{os_resident_for_tax_purposes}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Net Stipend</th><td>${net_stipend}</td><td>${s_net_stipend}</td></tr><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td><td>${s_tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td><td>${s_additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Net Stipend + Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td><td>${s_taxable_income}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">LAFHA</th><td>${os_lafha}</td><td>${s_os_lafha}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td><td>${s_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Joint Financial Package</th><td colspan="2">${joint_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td><td>${s_mmr}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td colspan="2">${workers_comp}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td colspan="2">${ccca_levy}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td colspan="2">${tmn}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td><td>${s_total_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td><td>${s_resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td><td>{s_super_fund}</td></tr><tpl if="additional_life_cover &gt; 0 || s_additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td><td>{s_income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p></div><!-- END international-assignment-couple -->');
	//IAC

	//IAC

	//defines the home assignmnet section of the template for displaying the TMN
	//HAS
this.templates['home-assignment']['single'] = new Ext.XTemplate('<!-- START home-assignment-single --><div class="tmn-page"><div class="tmn-home-break-down"><div class="header">TMN Break Down for Home Assignment</div><table><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Dates of Assignment</th><td>{os_assignment_start_date} - {os_assignment_end_date}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Tax Status</th><td>{os_resident_for_tax_purposes}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Stipend (Money in your account)</th><td>${stipend}</td></tr><tpl if="housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">Housing Stipend (The amount of your stipend that will be used on housing)</th><td>${housing_stipend}</td></tr></tpl><tpl if="taxable_future_investment &gt; 0"><tr class="tmn-data"><th colspan="2">Future Investment (The amount of your stipend that will go toward your nominated investment)</th><td>${taxable_future_investment}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Stipend + <tpl if="housing_stipend &gt; 0">Housing Stipend + </tpl><tpl if="taxable_future_investment &gt; 0">Future Investment + </tpl>Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td></tr><tr><td colspan="3"><hr /></td></tr><tpl if="pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">MFB\'s</th><td>${max_mfb}</td></tr><tpl if="additional_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Housing Allowance</th><td>${additional_housing_allowance}</td></tr></tpl><tpl if="os_overseas_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Overseas Housing Allowance</th><td>${os_overseas_housing_allowance}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Mortgage Payment</th><td>${additional_mortgage}</td></tr></tpl><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td>${total_transfers}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td>${workers_comp}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td>${ccca_levy}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td>${tmn}</td></tr><tr><td colspan="3"><hr /></td></tr></table></div><tpl if="housing &gt; 0"><p>&nbsp;</p><div class="tmn-housing-summary"><div class="header">Housing Summary</div><table><tr class="tmn-data"><th colspan="2">The amount that comes from your MFBs monthly</th><td>${housing_mfb}</td></tr><tpl if="housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from you Stipend monthly</th><td>${housing_stipend}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from your Future Investment (Additional Mortgage Payment) monthly</th><td>${additional_mortgage}</td></tr></tpl><tr class="tmn-data"><th colspan="2">The amount that comes from Additional Housing Allowance monthly</th><td>${additional_housing}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Housing</th><td>${monthly_housing}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th style="text-align:center;" colspan="3">CCCA will pay ${housing} into your elected housing account {housing_frequency}.</th></tr><tr><td colspan="3"><hr /></td></tr><tpl if="additional_mortgage &gt; 0"><tr><th style="text-align:center;" colspan="4">CCCA will also pay an additional ${additional_mortgage} monthly toward your mortgage.<br />This payment will be paid according to the details on your Future Investment Form.</th></tr><tr><td colspan="3"><hr /></td></tr></tpl><tr><th style="text-align:center;" colspan="3">CCCA will also give you ${os_overseas_housing} toward the cost of your housing outside of Australia.</th></tr><tr><td colspan="3"><hr /></td></tr></table></div></tpl><tpl if="max_mfb &gt; 0"><p>&nbsp;</p><div class="tmn-mfb-summary"><div class="header">Ministry Fringe Benifits Summary</div><table><tr><th colspan="2">MFB Rate</th><td>{mfb_rate}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that you can make claims from</th><td>${claimable_mfb}</td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that will go toward housing</th><td>${housing_mfb}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Ministry Fringe Benifits</th><td>${max_mfb}</td></tr><tr><td colspan="3"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td></tr><tpl if="pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td></tr><tr><td colspan="3"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td></tr><tpl if="additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><p class="footer">Version: {versionnumber}</p></div><!-- END home-assignment-single -->');
	//HAS

	//HAS
	
	//HAC
this.templates['home-assignment']['spouse'] = new Ext.XTemplate('<!-- START home-assignment-couple --><div class="tmn-page"><div class="tmn-home-break-down"><div class="header">TMN Break Down for Home Assignment</div><table><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Name</th><td>{firstname}</td><td>{s_firstname}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Ministry</th><td>{ministry}</td><td>{s_ministry}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Dates of Assignment</th><td colspan="2">{os_assignment_start_date} - {os_assignment_end_date}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Status</th><td>{ft_pt_os} - {days_per_wk} Days</td><td>{s_ft_pt_os} - {s_days_per_wk} Days</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Tax Status</th><td colspan="2">{os_resident_for_tax_purposes}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Stipend (Money in your account)</th><td>${stipend}</td><td>${s_stipend}</td></tr><tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">Housing Stipend (The amount of your stipend that will be used on housing)</th><td>${housing_stipend}</td><td>${s_housing_stipend}</td></tr></tpl><tpl if="taxable_future_investment &gt; 0 || s_taxable_future_investment &gt; 0"><tr class="tmn-data"><th colspan="2">Future Investment (The amount of your stipend that will go toward your nominated investment)</th><td>${taxable_future_investment}</td><td>${s_taxable_future_investment}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Estimated Tax </th><td>${tax}</td><td>${s_tax}</td></tr><tr class="tmn-data"><th colspan="2">Additional Tax </th><td>${additional_tax}</td><td>${s_additional_tax}</td></tr><tr class="tmn-data"><th colspan="2">Post-tax Super </th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Taxable Income (Stipend + <tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0">Housing Stipend + </tpl><tpl if="taxable_future_investment &gt; 0 || s_taxable_future_investment &gt; 0">Future Investment + </tpl>Estimated Tax + Additional Tax + Post-Tax Super)</th><td>${taxable_income}</td><td>${s_taxable_income}</td></tr><tr><td colspan="4"><hr /></td></tr><tpl if="pre_tax_super &gt; 0 || s_pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre-tax Super </th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Additional Life Cover (per month)</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr><tr class="tmn-data"><th colspan="2">MFB\'s</th><td>${max_mfb}</td><td>${s_max_mfb}</td></tr><tpl if="additional_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Housing Allowance</th><td>${additional_housing_allowance}</td><td>${s_additional_housing_allowance}</td></tr></tpl><tpl if="os_overseas_housing &gt; 0"><tr class="tmn-data"><th colspan="2">Overseas Housing Allowance</th><td>${os_overseas_housing_allowance}</td><td>${s_os_overseas_housing_allowance}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">Additional Mortgage Payment</th><td colspan="2">${additional_mortgage}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Financial Package </th><td>${financial_package}</td><td>${s_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Joint Financial Package</th><td colspan="2">${joint_financial_package}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Employer Super </th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">MMR</th><td>${mmr}</td><td>${s_mmr}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">Worker\'s Compensation</th><td colspan="2">${workers_comp}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">CCCA Levy</th><td colspan="2">${ccca_levy}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Needs</th><td colspan="2">${tmn}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div><tpl if="housing &gt; 0"><p>&nbsp;</p><div class="tmn-housing-summary"><div class="header">Housing Summary</div><table><tr class="tmn-data"><th colspan="2">The amount that comes from your MFBs monthly</th><td>${housing_mfb}</td><td>${s_housing_mfb}</td></tr><tpl if="housing_stipend &gt; 0 || s_housing_stipend &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from you Stipend monthly</th><td>${housing_stipend}</td><td>${s_housing_stipend}</td></tr></tpl><tpl if="additional_mortgage &gt; 0"><tr class="tmn-data"><th colspan="2">The amount that comes from your Future Investment (Additional Mortgage Payment) monthly</th><td colspan="2">${additional_mortgage}</td></tr></tpl><tr class="tmn-data"><th colspan="2">The amount that comes from Additional Housing Allowance monthly</th><td colspan="2">${additional_housing}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Monthly Housing</th><td colspan="2">${monthly_housing}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th style="text-align:center;" colspan="4">CCCA will pay ${housing} into your elected housing account {housing_frequency}.</th></tr><tr><td colspan="4"><hr /></td></tr><tpl if="additional_mortgage &gt; 0"><tr><th style="text-align:center;" colspan="4">CCCA will also pay an additional ${additional_mortgage} monthly toward your mortgage.<br />This payment will be paid according to the details on your Future Investment Form.</th></tr><tr><td colspan="4"><hr /></td></tr></tpl><tr><th style="text-align:center;" colspan="4">CCCA will also give you ${os_overseas_housing} toward the cost of your housing outside of Australia.</th></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><tpl if="max_mfb &gt; 0 || s_max_mfb &gt; 0"><p>&nbsp;</p><div class="tmn-mfb-summary"><div class="header">Ministry Fringe Benifits Summary</div><table><tr><th colspan="2">MFB Rate</th><td>{mfb_rate}</td><td>{s_mfb_rate}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that you can make claims from</th><td>${claimable_mfb}</td><td>${s_claimable_mfb}</td></tr><tr class="tmn-data"><th colspan="2">The amount of your MFBs that will go toward housing</th><td>${housing_mfb}</td><td>${s_housing_mfb}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Ministry Fringe Benifits</th><td>${max_mfb}</td><td>${s_max_mfb}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><div class="tmn-super-summary"><div class="header">Super Summary</div><table><tr class="tmn-data"><th colspan="2">Post Tax Super</th><td>${post_tax_super}</td><td>${s_post_tax_super}</td></tr><tpl if="pre_tax_super &gt; 0 || s_pre_tax_super &gt; 0"><tr class="tmn-data"><th colspan="2">Pre Tax Super</th><td>${pre_tax_super}</td><td>${s_pre_tax_super}</td></tr></tpl><tr class="tmn-data"><th colspan="2">Employer Super</th><td>${employer_super}</td><td>${s_employer_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Super</th><td>${total_super}</td><td>${s_total_super}</td></tr><tr><td colspan="4"><hr /></td></tr><tr><th colspan="2">Reportable Employer Super Contribution (RESC)</th><td>${resc}</td><td>${s_resc}</td></tr><tr><th colspan="2">Super Choice</th><td>{super_fund}</td><td>{s_super_fund}</td></tr><tpl if="additional_life_cover &gt; 0 || s_additional_life_cover &gt; 0"><tr><th colspan="2">Amount of Additional Life Cover</th><td>${additional_life_cover}</td><td>${s_additional_life_cover}</td></tr></tpl><tr><th colspan="2">Additional Income Protection Premium paid from</th><td>{income_protection_cover_source}</td><td>{s_income_protection_cover_source}</td></tr></table></div><tpl if="total_transfers &gt; 0"><p>&nbsp;</p><div class="tmn-internal-transfer-summary"><div class="header">Internal Transfer Summary</div><table><tr><th colspan="2">Internal Transfers: </th><td>Name</td><td>Amount</td></tr><tpl for="transfers"><tr class="tmn-data"><th colspan="2"></th><td>{name}</td><td>${amount}</td></tr></tpl><tr><td colspan="4"><hr /></td></tr><tr class="tmn-total"><th colspan="2">Total Internal Transfers</th><td colspan="2">${total_transfers}</td></tr><tr><td colspan="4"><hr /></td></tr></table></div></tpl><p>&nbsp;</p><p class="footer">Version: {versionnumber}</p></div><!-- END home-assignment-couple -->');
	//HAC

	//HAC

	
	/**
	 * The config that defines the physical layout of the panel.
	 * It is only used in construtor so there is no use in changing it dynamically. Edit it in the source.
	 */
	var config =  {
			itemId:		id,
			frame:		true,
			header:		false,
			bodyStyle:	'padding:0'
	};
	
	//this is a call to tmn.view.TmnView's parent constructor (Ext.FormPanel), this will give tmn.view.TmnView all the variables and methods that it's parent does
	tmn.view.SummaryPanel.superclass.constructor.call(this, config);
};

//This is the section of the file where the methods are defined. The structure of the visuals is defined above this, in the construtor.
Ext.extend(tmn.view.SummaryPanel, Ext.Panel, {
	
	/**
	 * Loads the Panel with the users TMN data
	 * @param {Object}	response	An Object/Associative Array of strings that contains all the reponses from form submittions.
	 * 								This holds the data that is to be displayed using templates on this form.
	 */
	renderSummary: function(data, isOverseas, hasSpouse) {
		
		//make sure there are values to display (if the values are missing then show an error message)
		if (data['aussie-based'] !== undefined || (data['international-assignment'] !== undefined && data['home-assignment'] !== undefined)) {
			//display the appropriate template based on the user's details
			if (isOverseas) {
				if (hasSpouse){
					this.templates['international-assignment']['spouse'].overwrite(this.body, data['international-assignment']);
					this.templates['home-assignment']['spouse'].append(this.body, data['home-assignment']);
				} else {
					this.templates['international-assignment']['single'].overwrite(this.body, data['international-assignment']);
					this.templates['home-assignment']['single'].append(this.body, data['home-assignment']);
				}
			} else {
				if (hasSpouse){
					this.templates['aussie-based']['spouse'].overwrite(this.body, data['aussie-based']);
				} else {
					this.templates['aussie-based']['single'].overwrite(this.body, data['aussie-based']);
				}
			}
		} else {
			//tell the user there is an error with displaying their values
			Ext.MessageBox.show({
				icon: Ext.MessageBox.ERROR,
				buttons: Ext.MessageBox.OK,
				closable: false,
				title: 'Error',
				msg: 'Your values can not be displayed. Try again by pressing the Previous button in the bottom left corner of the document followed by pressing the Next button in the bottom right. If you see this error again contact <a href="mailto:tech.team@ccca.org.au">tech.team@ccca.org.au</a>.'
			});
		}
	},
	
	/**
	 * Resets the summary panel to an empty panel
	 */
	resetSummary: function() {
		//print it
		if (this.rendered) {
			this.body.update('');
		}
	},
	
	/**
	 * Prints the users TMN then send the data to the backend to be stored in the Database
	 */
	printSummary: function() {
		//print it
		Ext.ux.Printer.print(this);
	}
});
