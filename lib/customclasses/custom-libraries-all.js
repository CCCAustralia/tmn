Ext.LinkButton=Ext.extend(Ext.Button,{template:new Ext.Template('<table cellspacing="0" class="x-btn {3}"><tbody class="{1}">',"<tr>",'<td class="x-btn-tl"><i>&#160;</i></td>','<td class="x-btn-tc"></td>','<td class="x-btn-tr"><i>&#160;</i></td>',"</tr>","<tr>",'<td class="x-btn-ml"><i>&#160;</i></td>','<td class="x-btn-mc">','<em class="{2}" unselectable="on">','<a href="{4}" style="display:block" target="{5}" class="x-btn-text">{0}</a>',"</em>","</td>",'<td class="x-btn-mr"><i>&#160;</i></td>',"</tr>","<tr>",'<td class="x-btn-bl"><i>&#160;</i></td>','<td class="x-btn-bc"></td>','<td class="x-btn-br"><i>&#160;</i></td>',"</tr>","</tbody></table>").compile(),buttonSelector:"a:first",baseParams:{},params:{},getTemplateArgs:function(){return Ext.Button.prototype.getTemplateArgs.apply(this).concat([this.getHref(),this.target])},onClick:function(a){if(a.button!=0){return}if(this.disabled){this.stopEvent(a)}else{if(this.fireEvent("click",this,a)!==false){if(this.handler){this.handler.call(this.scope||this,this,a)}}}},getHref:function(){var a=this.href;var b=Ext.urlEncode(Ext.apply(Ext.apply({},this.baseParams),this.params));if(b.length){a+=((this.href.indexOf("?")==-1)?"?":"&")+b}return a},setParams:function(a){this.params=a;this.el.child(this.buttonSelector,true).href=this.getHref()},setNameAndEmail:function(c,b,a){this.setText("Email "+c+" "+b);this.href="mailto:"+a+"?subject=TMN: Submission Enquiry";this.el.child(this.buttonSelector,true).href=this.getHref()}});Ext.reg("linkbutton",Ext.LinkButton);Ext.apply(Ext.form.VTypes,{daterange:function(d,c){var b=c.parseDate(d);if(!b){return false}if(c.startDateField&&(!this.dateRangeMax||(b.getTime()!=this.dateRangeMax.getTime()))){var e=c.startDateField();e.setMaxValue(b);this.dateRangeMax=b}else{if(c.endDateField&&(!this.dateRangeMin||(b.getTime()!=this.dateRangeMin.getTime()))){var a=c.endDateField();a.setMinValue(b);this.dateRangeMin=b}}return true}});
/*
 * Ext JS Library 3.1.1
 * Copyright(c) 2006-2010 Ext JS, LLC
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.StatusBar=Ext.extend(Ext.Toolbar,{cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,emptyText:"&nbsp;",activeThreadId:0,initComponent:function(){if(this.statusAlign=="right"){this.cls+=" x-status-right"}Ext.ux.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.ux.StatusBar.superclass.afterRender.call(this);var a=this.statusAlign=="right";this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=new Ext.Toolbar.TextItem({cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""});if(a){this.add("->");this.add(this.statusEl)}else{this.insert(0,this.statusEl);this.insert(1,"->")}this.doLayout()},setStatus:function(d){d=d||{};if(typeof d=="string"){d={text:d}}if(d.text!==undefined){this.setText(d.text)}if(d.iconCls!==undefined){this.setIcon(d.iconCls)}if(d.clear){var e=d.clear,b=this.autoClear,a={useDefaults:true,anim:true};if(typeof e=="object"){e=Ext.applyIf(e,a);if(e.wait){b=e.wait}}else{if(typeof e=="number"){b=e;e=a}else{if(typeof e=="boolean"){e=a}}}e.threadId=this.activeThreadId;this.clearStatus.defer(b,this,[e])}return this},clearStatus:function(c){c=c||{};if(c.threadId&&c.threadId!==this.activeThreadId){return this}var b=c.useDefaults?this.defaultText:this.emptyText,a=c.useDefaults?(this.defaultIconCls?this.defaultIconCls:""):"";if(c.anim){this.statusEl.el.fadeOut({remove:false,useDisplay:true,scope:this,callback:function(){this.setStatus({text:b,iconCls:a});this.statusEl.el.show()}})}else{this.statusEl.hide();this.setStatus({text:b,iconCls:a});this.statusEl.show()}return this},setText:function(a){this.activeThreadId++;this.text=a||"";if(this.rendered){this.statusEl.setText(this.text)}return this},getText:function(){return this.text},setIcon:function(a){this.activeThreadId++;a=a||"";if(this.rendered){if(this.currIconCls){this.statusEl.removeClass(this.currIconCls);this.currIconCls=null}if(a.length>0){this.statusEl.addClass(a);this.currIconCls=a}}else{this.currIconCls=a}return this},showBusy:function(a){if(typeof a=="string"){a={text:a}}a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(a)}});Ext.reg("statusbar",Ext.ux.StatusBar);
/*
 * Ext JS Library 3.1.1
 * Copyright(c) 2006-2010 Ext JS, LLC
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.ValidationStatus=Ext.extend(Ext.Component,{errorIconCls:"x-status-error",errorListCls:"x-status-error-list",validIconCls:"x-status-valid",showText:"The form has errors (click for details...)",hideText:"Click again to hide the error list",submitText:"Saving...",init:function(a){a.on("render",function(){this.statusBar=a;this.monitor=true;this.errors=new Ext.util.MixedCollection();this.listAlign=(a.statusAlign=="right"?"br-tr?":"bl-tl?");if(this.form){this.form=Ext.getCmp(this.form).getForm();this.startMonitoring();this.form.on("beforeaction",function(d,c){if(c.type=="submit"){}},this);var b=function(){this.monitor=true};this.form.on("actioncomplete",b,this);this.form.on("actionfailed",b,this)}},this,{single:true});a.on({scope:this,afterlayout:{single:true,fn:function(){a.statusEl.getEl().on("click",this.onStatusClick,this,{buffer:200})}},beforedestroy:{single:true,fn:this.onDestroy}})},startMonitoring:function(){this.form.items.each(function(a){a.on("invalid",this.onFieldValidation,this);a.on("valid",this.onFieldValidation,this)},this)},stopMonitoring:function(){this.form.items.each(function(a){a.un("invalid",this.onFieldValidation,this);a.un("valid",this.onFieldValidation,this)},this)},onDestroy:function(){this.stopMonitoring();this.statusBar.statusEl.un("click",this.onStatusClick,this);Ext.ux.ValidationStatus.superclass.onDestroy.call(this)},onSubmitFailure:function(){this.showErrors()},onFieldValidation:function(a,b){if(!this.monitor){return false}if(b){this.errors.add(a.id,{field:a,msg:b})}else{this.errors.removeKey(a.id)}this.updateErrorList();if(this.errors.getCount()>0){if(this.statusBar.getText()!=this.showText){this.statusBar.setStatus({text:this.showText,iconCls:this.errorIconCls})}}else{this.statusBar.clearStatus().setIcon(this.validIconCls)}},updateErrorList:function(){if(this.errors.getCount()>0){var a="<ul>";this.errors.each(function(b){a+=('<li id="x-err-'+b.field.id+'"><a href="#">'+b.field.fieldLabel+": "+b.msg+"</a></li>")},this);this.getMsgEl().update(a+"</ul>")}else{this.getMsgEl().update("")}},getMsgEl:function(){if(!this.msgEl){this.msgEl=Ext.DomHelper.append(Ext.getBody(),{cls:this.errorListCls+" x-hide-offsets"},true);this.msgEl.on("click",function(b){var a=b.getTarget("li",10,true);if(a){Ext.getCmp(a.id.split("x-err-")[1]).focus();this.hideErrors()}},this,{stopEvent:true})}return this.msgEl},showErrors:function(){this.updateErrorList();this.getMsgEl().alignTo(this.statusBar.getEl(),this.listAlign).slideIn("b",{duration:0.3,easing:"easeOut"});this.statusBar.setText(this.hideText);this.form.getEl().on("click",this.hideErrors,this,{single:true})},hideErrors:function(){var a=this.getMsgEl();if(a.isVisible()){a.slideOut("b",{duration:0.2,easing:"easeIn"});this.statusBar.setText(this.showText)}this.form.getEl().un("click",this.hideErrors,this)},onStatusClick:function(){if(this.getMsgEl().isVisible()){this.hideErrors()}else{if(this.errors.getCount()>0){this.showErrors()}}}});Ext.ux.Printer=function(){return{renderers:{},registerRenderer:function(b,a){this.renderers[b]=new (a)()},getRenderer:function(a){return this.renderers[a]},print:function(a){var d=a.getXTypes().split("/");for(var b=d.length-1;b>=0;b--){var e=d[b],c=this.getRenderer(e);if(c!=undefined){c.print(a);break}}}}}();Ext.override(Ext.Component,{getXTypes:function(){var a=this.constructor;if(!a.xtypes){var e=[],b=this;while(b){var d=b.constructor.xtype;if(d!=undefined){e.unshift(d)}b=b.constructor.superclass}a.xtypeChain=e;a.xtypes=e.join("/")}return a.xtypes}});Ext.ux.Printer.BaseRenderer=Ext.extend(Object,{print:function(b){var a=b&&b.getXType?String.format("print_{0}_{1}",b.getXType(),b.id):"print",c;if(Ext.isIE){c=window.open()}else{c=window.open("",a)}c.document.write(this.generateHTML(b));c.document.close();c.print()},generateHTML:function(a){return new Ext.XTemplate('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',"<html>","<head>",'<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />','<link href="'+this.stylesheetPath+'" rel="stylesheet" type="text/css" media="screen,print" />',"<title>"+this.getTitle(a)+"</title>","</head>","<body>",this.generateBody(a),"</body>","</html>").apply(this.prepareData(a))},generateBody:Ext.emptyFn,prepareData:function(a){return a},getTitle:function(a){return typeof a.getTitle=="function"?a.getTitle():(a.title||"Printing")},stylesheetPath:"lib/resources/css/customstyles.css"});Ext.ux.Printer.PanelRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(a){return String.format("<div class='x-panel-print'>{0}</div>",a.body.dom.innerHTML)}});Ext.ux.Printer.registerRenderer("panel",Ext.ux.Printer.PanelRenderer);Ext.namespace("Ext.ux");Ext.ux.IconCombo=function(a){Ext.ux.IconCombo.superclass.constructor.call(this,a);this.tpl=a.tpl||'<tpl for="."><div class="x-combo-list-item x-icon-combo-item {[values.'+this.lockedField+' ? "x-icon-combo-locked" : "x-icon-combo-unlocked"]}">{'+this.displayField+"}</div></tpl>";this.on({render:{scope:this,fn:function(){var b=this.el.up("div.x-form-field-wrap");this.wrap.applyStyles({position:"relative"});this.el.addClass("x-icon-combo-input");this.flag=Ext.DomHelper.append(b,{tag:"div",style:"position:absolute"})}}})};Ext.extend(Ext.ux.IconCombo,Ext.form.ComboBox,{setIconCls:function(){var a=this.store.query(this.valueField,this.getValue()).itemAt(0);if(a){if(a.get(this.lockedField)){this.flag.className="x-icon-combo-icon x-icon-combo-locked"}else{this.flag.className="x-icon-combo-icon x-icon-combo-unlocked"}}},setValue:function(a){Ext.ux.IconCombo.superclass.setValue.call(this,a);if(this.rendered){this.setIconCls()}},clearValue:function(){Ext.ux.IconCombo.superclass.clearValue.call(this);if(this.rendered){this.flag.className="x-icon-combo-icon x-icon-combo-unlocked"}}});